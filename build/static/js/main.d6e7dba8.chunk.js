(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(9),s=a.n(c),i=(a(16),a(2)),l=a(3),r=a(4),u=a(6),d=a(5),h=a(7),m=a(1),f=a.n(m);f.a.init({appId:"mQOGtDlcxXM9tJzjMOXV31ok-gzGzoHsz",appKey:"jbFTLad0MUEduMTU8ihF9ujC"});f.a;function p(e){return Object(i.a)({id:e.id},e.attributes)}function v(){var e=f.a.User.current();return e?p(e):null}a(18);var b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"newTodoOnChange",value:function(e){(0,this.props.reflashNewToDo)(e.target.value)}},{key:"clearNewTodo",value:function(){(0,this.props.reflashNewToDo)("")}},{key:"onKeyPress",value:function(e){var t=this.props.addTodo;"Enter"===e.key&&(t(),this.clearNewTodo())}},{key:"render",value:function(){var e=this.props,t=e.newTodo,a=e.showSelectAll,n=e.selectAll;return o.a.createElement("div",{className:"TodoInput"},o.a.createElement("div",{className:"selectAll-wrapper ".concat(a?"":"hidden"),onClick:function(){return n()}},o.a.createElement("svg",{className:"icon icon-arrow","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-arrow"}))),o.a.createElement("input",{className:"new-todo",type:"text",placeholder:g,value:t,onChange:this.newTodoOnChange.bind(this),onKeyPress:this.onKeyPress.bind(this)}))}}]),t}(n.Component),g="What needs to be done?",T=(a(19),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={selectedType:"All",seenTodoList:[]},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"toggleSelected",value:function(e){this.props.toggleSelected.call(null,e)}},{key:"changeSelectedType",value:function(e){this.setState(Object(i.a)({},this.state,{selectedType:e}))}},{key:"filterTodoList",value:function(e,t){var a=[];switch(t){case"All":a=e;break;case"Active":a=e.filter(function(e){return"completed"!==e.status});break;case"Completed":a=e.filter(function(e){return"completed"===e.status})}return a}},{key:"delTodo",value:function(e){this.props.delTodo.call(null,e)}},{key:"batchDelTodo",value:function(){this.props.batchDelTodo.call(null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectedId,n=t.Todolists,c=this.state.selectedType,s=n.length-a.length,i=this.filterTodoList(n,c).map(function(t,n){var c=a.indexOf(t.id)>=0;return o.a.createElement("li",{className:"todo-item ".concat(c?"completed":""),key:n,"item-id":t.id,onChange:function(e){return console.log(e.target.value)},onDoubleClick:function(e){return console.log(e.target)}},o.a.createElement("div",{className:"check-wrapper",onClick:function(){return e.toggleSelected(t)}},o.a.createElement("svg",{className:"icon icon-".concat(c?"checked":"unchecked"),"aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-".concat(c?"checked":"unchecked")}))),o.a.createElement("p",{className:"item-content"},t.content,o.a.createElement("svg",{className:"icon icon-close","aria-hidden":"true",onClick:function(){return e.delTodo(t.id)}},o.a.createElement("use",{xlinkHref:"#icon-close"}))))});return o.a.createElement("div",{className:"TodoItems"},o.a.createElement("ul",{className:"todo-list"},i),o.a.createElement("footer",{className:"TodoItems-footer clearfix"},o.a.createElement("span",{className:"left"},s," iterm","".concat(s>1?"s":"")," left"),o.a.createElement("ul",{className:"filters"},o.a.createElement("li",{className:"filters-all ".concat("All"===c?"active":""),onClick:function(){return e.changeSelectedType("All")}},"All"),o.a.createElement("li",{className:"filters-active ".concat("Active"===c?"active":""),onClick:function(){return e.changeSelectedType("Active")}},"Active"),o.a.createElement("li",{className:"filters-completed ".concat("Completed"===c?"active":""),onClick:function(){return e.changeSelectedType("Completed")}},"Completed")),o.a.createElement("span",{className:"clear-completed",onClick:function(){return e.batchDelTodo()}},"Clear completed")))}}]),t}(n.Component)),E=(a(20),a(21),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"onDataChange",value:function(e,t){var a=this.props.onDataChange;a(e.target.value,t)}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit()}},{key:"render",value:function(){var e=this,t=this.props.error;return o.a.createElement("div",{className:"SignInForm"},o.a.createElement("form",{className:"signIn-form",onSubmit:function(t){return e.onSubmit(t)}},o.a.createElement("div",{className:"input-wrapper"},o.a.createElement("svg",{className:"icon icon-user","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-user"})),o.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(t){return e.onDataChange(t,"username")}})),o.a.createElement("div",{className:"input-wrapper"},o.a.createElement("svg",{className:"icon icon-password","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-password"})),o.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(t){return e.onDataChange(t,"password")}})),t&&o.a.createElement("p",{className:"tips"},t),o.a.createElement("button",{className:"signIn-button"},"Sign In")))}}]),t}(n.Component)),k=(a(22),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"onDataChange",value:function(e,t){var a=this.props.onDataChange;a(e.target.value,t)}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit()}},{key:"render",value:function(){var e=this,t=this.props.error;return o.a.createElement("div",{className:"SignUpForm"},o.a.createElement("form",{className:"signUp-form",onSubmit:function(t){return e.onSubmit(t)}},o.a.createElement("div",{className:"input-wrapper"},o.a.createElement("svg",{className:"icon icon-email","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-email"})),o.a.createElement("input",{type:"text",placeholder:"Email",onChange:function(t){return e.onDataChange(t,"email")}})),o.a.createElement("div",{className:"input-wrapper"},o.a.createElement("svg",{className:"icon icon-user","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-user"})),o.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(t){return e.onDataChange(t,"username")}})),o.a.createElement("div",{className:"input-wrapper"},o.a.createElement("svg",{className:"icon icon-password","aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-password"})),o.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(t){return e.onDataChange(t,"password")}})),t&&o.a.createElement("p",{className:"tips"},t),o.a.createElement("button",{className:"signUp-button"},"Sign Up")))}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={selectedTab:"signUp",formData:{username:"",password:"",email:""},error:""},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"changeTab",value:function(e){var t=e.target.attributes.value.textContent;this.setState(Object(i.a)({},this.state,{selectedTab:t}))}},{key:"changeDataForm",value:function(e,t){var a=this.state.formData;a[t]=e,this.setState(Object(i.a)({},this.state,{formData:a}))}},{key:"signUpOrIn",value:function(){var e=this,t=this.props,a=t.changeUser,n=t.fetchAllTodos,o=this.state,c=o.formData,s=c.email,l=c.username,r=c.password,u=o.selectedTab,d=function(e){a.call(null,e),n()},h=function(t){var a="";switch(t.code){case 125:a="\u7535\u5b50\u90ae\u7bb1\u5730\u5740\u65e0\u6548";break;case 200:a="\u7528\u6237\u540d\u6216\u8005\u7528\u6237\u540d\u4e3a\u7a7a";break;case 201:a="\u8bf7\u586b\u5199\u5bc6\u7801";break;case 202:a="\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u5360\u7528";break;case 210:a="\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u5339\u914d";break;case 219:a="\u767b\u5f55\u5931\u8d25\u6b21\u6570\u8d85\u8fc7\u9650\u5236\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5\uff0c\u6216\u8005\u901a\u8fc7\u5fd8\u8bb0\u5bc6\u7801\u91cd\u8bbe\u5bc6\u7801";break;default:a=t.rawMessage}console.log("1111111",t),e.setState(Object(i.a)({},e.state,{error:a}))};"signUp"===u&&function(e,t,a,n,o){var c=new f.a.User;c.setUsername(t),c.setPassword(a),c.setEmail(e),c.signUp().then(function(e){var t=p(e);n.call(null,t)},function(e){o.call(null,e)})}(s,l,r,d,h),"signIn"===u&&function(e,t,a,n){f.a.User.logIn(e,t).then(function(e){var t=p(e);a.call(null,t)},function(e){n.call(null,e)})}(l,r,d,h)}},{key:"render",value:function(){var e=this.state,t=e.selectedTab,a=e.error;return o.a.createElement("div",{className:"UserDialog-wrapper"},o.a.createElement("div",{className:"UserDialog"},o.a.createElement("ul",{className:"tab-list"},o.a.createElement("li",{className:"tab-item ".concat("signUp"===t?"active":""),value:"signUp",onClick:this.changeTab.bind(this)},"Sign Up"),o.a.createElement("li",{className:"tab-item ".concat("signIn"===t?"active":""),value:"signIn",onClick:this.changeTab.bind(this)},"Sign In")),"signIn"===t?o.a.createElement(E,{onDataChange:this.changeDataForm.bind(this),onSubmit:this.signUpOrIn.bind(this),error:a}):o.a.createElement(k,{onDataChange:this.changeDataForm.bind(this),onSubmit:this.signUpOrIn.bind(this),error:a})))}}]),t}(n.Component),O=(a(23),a(24),a(25),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={user:v()||{},newTodo:"",todoList:[],selectedId:[]},a}return Object(h.a)(t,e),Object(r.a)(t,[{key:"reflashNewToDo",value:function(e){this.setState(Object(i.a)({},this.state,{newTodo:e}))}},{key:"addTodo",value:function(){var e=this,t=this.state,a=t.todoList,n=t.newTodo,o=t.user;""!==n&&function(e,t,a){var n=new(f.a.Object.extend("Todo"));for(var o in e)n.set(o,e[o]);n.save().then(function(e){e=p(e),t(e)},function(e){a(e)})}({userId:o.id,content:n,status:"active"},function(t){a.push(t),e.setState(Object(i.a)({},e.state,{todoList:a}))},function(e){alert(e)})}},{key:"delTodo",value:function(e){var t=this;!function(e,t,a){f.a.Object.createWithoutData("Todo",e).destroy().then(function(e){e=p(e),t(e)},function(e){a(e)})}(e,function(e){t.fetchAllTodos()},null)}},{key:"batchDelTodo",value:function(){var e=this;!function(e,t,a){var n=[];e.map(function(e){n.push(f.a.Object.createWithoutData("Todo",e))}),f.a.Object.destroyAll(n).then(function(){t()},function(e){a(e)})}(this.state.selectedId,function(){e.setState(Object(i.a)({},e.state,{selectedId:[]})),e.fetchAllTodos()},null)}},{key:"batchUpdateTodos",value:function(e,t,a){!function(e,t,a,n){var o=[];e.map(function(e){var a=f.a.Object.createWithoutData("Todo",e);a.set("status",t),o.push(a)}),f.a.Object.saveAll(o).then(function(e){a()},function(e){n(e)})}(e,t,a,null)}},{key:"selectAll",value:function(){var e=this,t=this.state,a=t.todoList,n=t.selectedId,o=a.map(function(e){return e.id});if(n.length!==a.length){this.batchUpdateTodos(o,"completed",function(){e.fetchAllTodos()})}else{this.batchUpdateTodos(o,"active",function(){e.fetchAllTodos()})}}},{key:"toggleSelected",value:function(e){var t=this;if(this.state.selectedId.indexOf(e.id)<0){var a=[e.id];this.batchUpdateTodos(a,"completed",function(){t.fetchAllTodos()})}else{var n=[e.id];this.batchUpdateTodos(n,"active",function(){t.fetchAllTodos()})}}},{key:"changeUser",value:function(e){this.setState(Object(i.a)({},this.state,{user:e}))}},{key:"signOut",value:function(){f.a.User.logOut(),this.setState({user:{},newTodo:"",todoList:[],selectedId:[]})}},{key:"fetchAllTodos",value:function(e){var t=this;!function(e,t,a){new f.a.Query("Todo").find().then(function(t){for(var a=[],n=0;n<t.length;n++){var o=p(t[n]);o.userId===e&&a.push(o)}return f.a.Object.saveAll(a)}).then(function(e){t(e)},function(e){a(e)})}(this.state.user.id,function(a){for(var n=[],o=0;o<a.length;o++)"completed"===a[o].status&&n.push(a[o].id);t.setState(Object(i.a)({},t.state,{todoList:a,selectedId:n})),e&&e()},null)}},{key:"componentDidMount",value:function(){this.fetchAllTodos()}},{key:"render",value:function(){var e=this.state,t=e.newTodo,a=e.todoList,n=e.selectedId,c=e.user;return o.a.createElement("div",{className:"App"},c.id&&o.a.createElement("div",{className:"welcome-wrapper"},o.a.createElement("p",{className:"welcome-tips"},"Welcome!",o.a.createElement("span",{className:"user-name"},c.username)),o.a.createElement("span",{className:"signOut-btn",onClick:this.signOut.bind(this)},"Sign out")),o.a.createElement("div",{className:"main-content"},o.a.createElement("h1",{className:"todos-title"},"todos"),o.a.createElement(b,{reflashNewToDo:this.reflashNewToDo.bind(this),addTodo:this.addTodo.bind(this),newTodo:t,showSelectAll:a.length>0,signOut:this.signOut.bind(this),selectAll:this.selectAll.bind(this)}),a.length>0&&o.a.createElement(T,{Todolists:a,selectedId:n,toggleSelected:this.toggleSelected.bind(this),delTodo:this.delTodo.bind(this),batchDelTodo:this.batchDelTodo.bind(this)}),!c.id&&o.a.createElement(w,{changeUser:this.changeUser.bind(this),fetchAllTodos:this.fetchAllTodos.bind(this)})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.d6e7dba8.chunk.js.map